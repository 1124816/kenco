<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Kenco</title>
    <link rel="stylesheet" type="text/css" href="/data.css" />
  </head>
  <body style="width:100%;padding:0px;margin:0;">
    <div id="door">
      <h2 id="Number">1</h2>
      <h3 id="timer1" onClick="timer()">0.0</h3>
    </div>
  <script src="/socket.io/socket.io.js"></script>
  <script>
  var socket = io();
  var base = [];
  var number = 0;

  socket.on('load',function(msg) {
	console.log(msg);
  base = msg;
  });

  number = document.location.href[document.location.href.length-1]-1;
  console.log(number);
  document.getElementById('Number').innerHTML = number+1;
  var timers = document.getElementById('timer1');

  var time = 0;
  var elapsed = '0.0';


  window.setTimeout(function() {
    if(base[number][0] == 1) {
      var time = base[number][1];
      console.log(time);
      window.setInterval(function() {
        elapsed = Math.floor((new Date().getTime() - time)/1000);
        min = Math.floor(elapsed/60);
        hour = Math.floor(min/60);
        elapsed = elapsed - (min*60);
        min = min - (hour*60);

        timers.innerHTML = hour + ":" + min + ":" +elapsed;
        //console.log(timers.innerHTML);
      }, 100);
    };
  }, 200);

  var timer = function() {
    if(base[number][0] == 0) {
      var time = new Date().getTime();
      socket.emit("time", [number, new Date().getTime()]);
      console.log("lolz");
      window.setInterval(function() {
        elapsed = Math.floor((new Date().getTime() - time)/1000);
        min = Math.floor(elapsed/60);
        hour = Math.floor(min/60);
        min = min - (hour*60);
        elapsed = elapsed - (min*60);

        timers.innerHTML = hour + ":" + min + ":" +elapsed;
        //console.log(timers.innerHTML);
      }, 100);
    };
  };

  </script>
  </body>
</html>
